<p align="center">
  <img src="docs/assets/logo.png" alt="HashBot Logo" width="200" height="200">
</p>

<h1 align="center">HashBot</h1>

<p align="center">
  <strong>Agent Economy on HashKey Chain</strong>
</p>

<p align="center">
  <em>Bot ç”¨ Botï¼Œè‡ªåŠ¨ä»˜è´¹ â€” çœŸæ­£çš„ Agent Economy</em>
</p>

<p align="center">
  <a href="#quick-start">Quick Start</a> â€¢
  <a href="#features">Features</a> â€¢
  <a href="#architecture">Architecture</a> â€¢
  <a href="#demo">Demo</a> â€¢
  <a href="#api">API</a>
</p>

---

## ğŸ¯ What is HashBot?

HashBot æ˜¯ä¸€ä¸ªå¼€æºçš„ **Agent ç»æµæ¡†æ¶**ï¼Œè®© AI Agent å¯ä»¥ç›¸äº’è°ƒç”¨å¹¶è‡ªåŠ¨ä»˜è´¹ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚    ğŸ‘¤ User                                                      â”‚
â”‚      â”‚                                                          â”‚
â”‚      â–¼                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚   â”‚  Telegram    â”‚  â—„â”€â”€ ç”¨æˆ·å‹å¥½çš„äº¤äº’ç•Œé¢                        â”‚
â”‚   â”‚    Bot       â”‚                                              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚          â”‚                                                      â”‚
â”‚          â–¼                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    A2A Protocol    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚   HashBot    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  Other       â”‚         â”‚
â”‚   â”‚   Agent      â”‚                    â”‚  Agents      â”‚         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚          â”‚                                                      â”‚
â”‚          â”‚ x402 Payment                                         â”‚
â”‚          â–¼                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚   â”‚  HashKey     â”‚  â—„â”€â”€ åˆè§„ Web3 æ”¯ä»˜ï¼Œä½ Gas                    â”‚
â”‚   â”‚   Chain      â”‚                                              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ¨ Features

| Feature | Description |
|---------|-------------|
| ğŸ”— **A2A Protocol** | Google å¼€æºçš„ Agent é—´é€šä¿¡æ ‡å‡† |
| ğŸ’° **x402 Payment** | HTTP 402 è‡ªåŠ¨ä»˜è´¹ï¼ŒAgent è°ƒç”¨å³ç»“ç®— |
| â›“ï¸ **HashKey Chain** | åˆè§„ Web3 æ”¯ä»˜å±‚ï¼Œæ¸¯å¸ç¨³å®šå¸ (HKDC) |
| ğŸ¤– **Telegram Bot** | ç”¨æˆ·å‹å¥½çš„äº¤äº’ç•Œé¢ |
| ğŸ§© **Plugin System** | è½»æ¾åˆ›å»ºè‡ªå·±çš„ä»˜è´¹ Agent |

## ğŸ§° Prerequisites

- Python 3.11+ï¼ˆå»ºè®®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼‰
- å¯é€‰ï¼šDocker / Docker Compose
- å¯é€‰ï¼šRedisï¼ˆç¼“å­˜ï¼‰
- éœ€è¦å‡†å¤‡ï¼šTelegram Bot Tokenã€HashKey RPCï¼ˆé»˜è®¤ä½¿ç”¨æµ‹è¯•ç½‘ï¼‰

## ğŸš€ Quick Start

### 1. Clone & Installï¼ˆæœ¬åœ°å¼€å‘ï¼‰

```bash
git clone https://github.com/your-org/hashbot.git
cd hashbot
# åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆWindowsï¼‰
python -m venv .venv
.venv\Scripts\activate

# å®‰è£…
pip install -e .
# å¼€å‘ä¾èµ–ï¼ˆå¯é€‰ï¼‰
pip install -e .[dev]
```

### 2. Configure

```bash
cp .env.example .env
# Edit .env with your settings
```

### 3. Run

```bash
# Developmentï¼ˆæœ¬åœ°ï¼‰
python -m server.main
# æˆ–ä½¿ç”¨é¡¹ç›®è„šæœ¬ï¼ˆå®‰è£…åä¼šç”Ÿæˆå‘½ä»¤ï¼‰
hashbot

# Production (Docker)
docker-compose up -d
```

### 4. Test the API

```bash
# Get agent info
curl http://localhost:8000/a2a/.well-known/agent.json

# Send a task
curl -X POST http://localhost:8000/a2a \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "id": "1",
    "method": "tasks/send",
    "params": {
      "message": {
        "role": "user",
        "parts": [{"type": "text", "text": "Analyze BTC"}]
      },
      "metadata": {"skill_id": "crypto_analyst"}
    }
  }'
```

## âš™ï¸ Configuration

- å¸¸ç”¨å¿…å¡«
  - TELEGRAM_BOT_TOKENï¼šTelegram æœºå™¨äººä»¤ç‰Œ
  - WALLET_PRIVATE_KEYï¼šå•†æˆ·é’±åŒ…ç§é’¥ï¼ˆç”¨äºé“¾ä¸Šç»“ç®—ï¼‰
  - MERCHANT_ADDRESSï¼šå•†æˆ·åœ°å€
- å¸¸ç”¨å¯é€‰
  - HASHKEY_RPC_URLï¼ˆé»˜è®¤æµ‹è¯•ç½‘ï¼‰ï¼šhttps://hashkeychain-testnet.alt.technology
  - HASHKEY_CHAIN_IDï¼ˆé»˜è®¤æµ‹è¯•ç½‘ï¼‰ï¼š177
  - API_HOSTï¼ˆé»˜è®¤ 0.0.0.0ï¼‰ï¼ŒAPI_PORTï¼ˆé»˜è®¤ 8000ï¼‰ï¼ŒAPI_DEBUGï¼ˆé»˜è®¤ falseï¼‰
  - DATABASE_URLï¼ˆé»˜è®¤ sqlite+aiosqlite:///./hashbot.dbï¼‰
  - LOG_LEVELï¼ˆDEBUG/INFO/WARNING/ERRORï¼Œé»˜è®¤ INFOï¼‰ï¼ŒLOG_FORMATï¼ˆjson/consoleï¼Œé»˜è®¤ jsonï¼‰
  - JWT_* ä¸ API_SECRET_KEYï¼ˆå¦‚éœ€å¼€å¯é‰´æƒï¼‰

ç¤ºä¾‹ .envï¼ˆèŠ‚é€‰ï¼‰ï¼š

```dotenv
TELEGRAM_BOT_TOKEN=xxxxxx
HASHKEY_RPC_URL=https://hashkeychain-testnet.alt.technology
HASHKEY_CHAIN_ID=177
API_HOST=0.0.0.0
API_PORT=8000
API_DEBUG=true
DATABASE_URL=sqlite+aiosqlite:///./hashbot.db
LOG_LEVEL=INFO
LOG_FORMAT=json
```

å®‰å…¨æç¤ºï¼šä¸è¦å°†ç§é’¥ã€Token ç­‰æ•æ„Ÿä¿¡æ¯æäº¤åˆ°ä»“åº“æˆ–æ—¥å¿—ã€‚

## ğŸ“² Telegram é›†æˆ

- é€šè¿‡ BotFather åˆ›å»ºæœºå™¨äººå¹¶è·å– TELEGRAM_BOT_TOKEN
- Webhook æ¥å£ï¼šPOST /webhook/telegramï¼ˆå¼€å‘ç¯å¢ƒé»˜è®¤å›æ˜¾ï¼‰
- åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å»ºè®®ä½¿ç”¨ python-telegram-bot çš„ Application æ¥å¤„ç†æ›´æ–°
- Bot å†…ç½®å‘½ä»¤ï¼š/startã€/helpã€/agentsã€/walletã€/balanceã€/pay

## ğŸ“˜ API æ–‡æ¡£

- å¥åº·æ£€æŸ¥ï¼šGET /health
- åˆ—å‡ºä»£ç†ï¼šGET /agents
- A2A å‘ç°ï¼šGET /a2a/.well-known/agent.json
- ä»»åŠ¡å‘é€ï¼šPOST /a2a
- å¦‚æœ API_DEBUG=trueï¼Œä¼šå¼€æ”¾ Swaggerï¼š/docs ä¸ ReDocï¼š/redoc

## ğŸ—ï¸ Architecture

```
hashbot/
â”œâ”€â”€ hashbot/                 # Core library
â”‚   â”œâ”€â”€ a2a/                # A2A Protocol implementation
â”‚   â”‚   â”œâ”€â”€ messages.py     # Message types (Task, AgentCard, etc.)
â”‚   â”‚   â”œâ”€â”€ protocol.py     # Protocol client
â”‚   â”‚   â””â”€â”€ executor.py     # Request handler
â”‚   â”‚
â”‚   â”œâ”€â”€ x402/               # x402 Payment extension
â”‚   â”‚   â”œâ”€â”€ payment.py      # Payment types
â”‚   â”‚   â”œâ”€â”€ executor.py     # Payment flow
â”‚   â”‚   â””â”€â”€ verification.py # Signature verification
â”‚   â”‚
â”‚   â”œâ”€â”€ hashkey/            # HashKey Chain integration
â”‚   â”‚   â”œâ”€â”€ chain.py        # Chain connection
â”‚   â”‚   â”œâ”€â”€ wallet.py       # Wallet management
â”‚   â”‚   â””â”€â”€ tokens.py       # HKDC token
â”‚   â”‚
â”‚   â”œâ”€â”€ bot/                # Telegram Bot
â”‚   â”‚   â”œâ”€â”€ handlers.py     # Message handlers
â”‚   â”‚   â””â”€â”€ keyboards.py    # Inline keyboards
â”‚   â”‚
â”‚   â””â”€â”€ agents/             # Agent framework
â”‚       â”œâ”€â”€ base.py         # BaseAgent class
â”‚       â”œâ”€â”€ registry.py     # Agent registry
â”‚       â””â”€â”€ examples/       # Example agents
â”‚           â”œâ”€â”€ crypto_analyst.py
â”‚           â”œâ”€â”€ translator.py
â”‚           â””â”€â”€ code_reviewer.py
â”‚
â”œâ”€â”€ server/                  # FastAPI server
â”‚   â”œâ”€â”€ main.py             # Entry point
â”‚   â””â”€â”€ routes/             # API routes
â”‚       â”œâ”€â”€ a2a.py          # A2A endpoints
â”‚       â”œâ”€â”€ webhook.py      # Telegram webhook
â”‚       â””â”€â”€ health.py       # Health checks
â”‚
â””â”€â”€ tests/                   # Test suite
```

## ğŸ¤– Built-in Agents

### 1. Crypto Analyst ğŸ“Š
```
Price: 0.1 HKDC per call
Skills: Token analysis, Market overview
```

### 2. AI Translator ğŸŒ
```
Price: 0.05 HKDC per call
Skills: Multi-language translation (50+ languages)
```

### 3. Code Reviewer ğŸ”
```
Price: 0.5 HKDC per call
Skills: Smart contract audit, Code review
```

## ğŸ’¡ Create Your Own Agent

```python
from hashbot.agents import BaseAgent, agent_card
from hashbot.agents.registry import register_agent

@register_agent("my_agent")
@agent_card(
    name="My Agent",
    description="Description of what your agent does",
    price_per_call=0.1,  # Price in HKDC
    currency="HKDC"
)
class MyAgent(BaseAgent):

    async def process(self, task):
        # Your logic here
        user_message = task.history[-1].parts[0].text

        result = f"Processed: {user_message}"

        return self._create_success_response(
            task,
            text=result,
            data={"status": "success"}
        )
```

## ğŸ’³ x402 Payment Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Client    â”‚                      â”‚   Merchant   â”‚
â”‚    Agent     â”‚                      â”‚    Agent     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                     â”‚
       â”‚  1. Request Service                 â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                                     â”‚
       â”‚  2. 402 Payment Required            â”‚
       â”‚    (Price: 0.1 HKDC)               â”‚
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
       â”‚                                     â”‚
       â”‚  3. Sign & Submit Payment           â”‚
       â”‚    (EIP-712 Signature)             â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
       â”‚                                     â”‚
       â”‚                      4. Settle On-Chain
       â”‚                         (HashKey Chain)
       â”‚                                     â”‚
       â”‚  5. Service Result + Receipt        â”‚
       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
       â”‚                                     â”‚
```

## ğŸ”§ API Reference

### Agent Discovery
```http
GET /a2a/.well-known/agent.json
```

### Send Task
```http
POST /a2a
Content-Type: application/json

{
  "jsonrpc": "2.0",
  "id": "unique-id",
  "method": "tasks/send",
  "params": {
    "message": {
      "role": "user",
      "parts": [{"type": "text", "text": "Your request"}]
    },
    "metadata": {
      "skill_id": "crypto_analyst"
    }
  }
}
```

### List Agents
```http
GET /agents
```

## ğŸ§ª Development

- è¿è¡Œæµ‹è¯•

```bash
pytest -q
```

- ä»£ç é™æ€æ£€æŸ¥

```bash
ruff check .
mypy .
```

## ğŸ¥ Demo

- å¯åŠ¨åè®¿é—®ï¼š/health æŸ¥çœ‹æœåŠ¡çŠ¶æ€
- ç¤ºä¾‹ Agentsï¼šCrypto Analystã€Translatorã€Code Reviewer
- Telegram ä¸­ä½¿ç”¨ /agents æµè§ˆå¹¶è°ƒç”¨ Agentï¼Œä»˜è´¹ç”± x402 è‡ªåŠ¨å¤„ç†

## ğŸŒ HashKey Chain

| Network | RPC URL | Chain ID |
|---------|---------|----------|
| Mainnet | https://mainnet.hashkeychain.io | 133 |
| Testnet | https://hashkeychain-testnet.alt.technology | 177 |

## ğŸ“š Related Projects

- [A2A Protocol](https://github.com/google/a2a) - Google Agent2Agent Protocol
- [x402 Extension](https://github.com/google-agentic-commerce/a2a-x402) - Payment Extension
- [HashKey Chain](https://hashkey.cloud/) - Compliant Web3 Infrastructure

## ğŸ“„ License

Apache-2.0

---

<p align="center">
  <strong>Built for the Agent Economy ğŸš€</strong>
</p>
